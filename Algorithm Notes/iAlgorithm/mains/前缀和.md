# å‰ç¼€å’Œ

å‰ç¼€å’ŒæŠ€å·§é€‚â½¤äºå¿«é€Ÿã€é¢‘ç¹åœ°è®¡ç®—â¼€ä¸ªç´¢å¼•åŒºé—´å†…çš„å…ƒç´ ä¹‹å’Œã€‚

æœ¬â½‚æœ‰labuladongçš„bç«™è§†é¢‘ï¼š[å‰ç¼€å’Œ/å·®åˆ†æ•°ç»„æŠ€å·§ç²¾è®²](https://www.bilibili.com/video/BV1NY4y1J7xQ/)

å¯¹åº”é¢˜ç›®ï¼š

|                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :--: |
| [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/range-sum-query-immutable/description/) |  ğŸŸ¢   |
| [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/range-sum-query-2d-immutable/description/) |  ğŸŸ    |
| [560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/) |  ğŸŸ    |
| [LCR 013. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/O4NDxx/description/) |  ğŸŸ    |

ç®—æ³•æ¡†æ¶ï¼š

```java
//	ä¸‰éƒ¨æ›²ï¼š
//	1. æ„å»ºå‰ç¼€å’Œæ•°ç»„ï¼ŒpreSum[0] = 0ï¼Œä¾¿äºè®¡ç®—ç´¯åŠ å’Œ
//	2. è®¡ç®— nums çš„ç´¯åŠ å’Œï¼Œå³å¡«å……preSumæ•°ç»„
//	3. å®ç°å…·ä½“ç®—æ³•åŠŸèƒ½ ï¼ˆæœ‰äº›åŠŸèƒ½å†™åœ¨æ­¥éª¤2ä¸­å¥½å®ç°ï¼‰
```

ä¾‹ä¸€ï¼š[303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/range-sum-query-immutable/description/)

```java
class NumArray {
    public int subarraySum(int[] nums, int k) {
        // æ„å»ºå‰ç¼€å’Œæ•°ç»„ï¼ŒpreSum[0] = 0ï¼Œä¾¿äºè®¡ç®—ç´¯åŠ å’Œ
        int[] preSum = new int[nums.length + 1];
        // è®¡ç®— nums çš„ç´¯åŠ å’Œ
        for (int i = 1; i < preSum.length; i++) {
            preSum[i] = preSum[i - 1] + nums[i - 1];
        }
        // å®ç°å…·ä½“ç®—æ³•åŠŸèƒ½ 
        /* æŸ¥è¯¢é—­åŒºé—´ [left, right] çš„ç´¯åŠ å’Œ */
        preSum[right + 1] - preSum[left];
    }
```

çœ‹è¿™ä¸ª preSum æ•°ç»„ï¼Œå¦‚æœæˆ‘æƒ³æ±‚ç´¢å¼•åŒºé—´ [1, 4] å†…çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå°±å¯ä»¥é€šè¿‡ preSum[5] - preSum[1] å¾—å‡ºï¼Œå› æ­¤ç”¨preSum[right+1]-preSum[left]æ±‚é—­åŒºé—´ [left, right] çš„ç´¯åŠ å’Œã€‚

![image-20240716131931311](./../pictures/image-20240716131931311.png)



ä¾‹äºŒï¼š[560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/)

```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        int cnt = 0, pre = 0;
        // æ„å»ºå‰ç¼€å’Œæ•°ç»„ï¼ŒpreSum[0] = 0ï¼Œä¾¿äºè®¡ç®—ç´¯åŠ å’Œ
        HashMap<Integer, Integer> mp = new HashMap<>();
        mp.put(0,1);
        
        // è®¡ç®— nums çš„ç´¯åŠ å’Œ
        for(int i=0; i<nums.length; i++){
            pre += nums[i];
            if(mp.containsKey(pre-k)){
                cnt += mp.get(pre-k);
            }
            mp.put(pre,mp.getOrDefault(pre,0) +1 );
        }
        return cnt;
  	}
}
```

![image-20240716140712895](./../pictures/image-20240716140712895.png)
